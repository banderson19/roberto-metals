(this["webpackJsonproberto-metals"]=this["webpackJsonproberto-metals"]||[]).push([[0],{71:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n,c,i,r,s,l,o,d,j,u,b=a(2),m=a.n(b),O=a(43),h=a.n(O),p=(a(71),a(20)),x=a(15),f=a(8),v=a.p+"static/media/logo.43b64337.png",g=a(1),N=function(){return Object(g.jsx)("header",{className:"bg-secondary flex-row",children:Object(g.jsxs)("div",{className:"rapid-green-color container flex-row justify-space-between jusitfy-center float-left",children:[Object(g.jsx)(x.b,{to:"/",children:Object(g.jsx)("h1",{children:" Roberto Metals "})}),Object(g.jsx)("img",{src:v,alt:"BigCo Inc. logo",className:"logo"}),Object(g.jsxs)("nav",{className:"float-right",children:[Object(g.jsx)(x.b,{to:"/login",children:"Login"}),Object(g.jsx)(x.b,{to:"/signup",children:"Signup"})]})]})})},k=function(){return Object(g.jsx)("footer",{className:"w-100 mt-auto  p-4",children:Object(g.jsx)("div",{className:"container",children:" \xa9 2021 by Bradford Anderson "})})},y=a(11),w=a.n(y),I=a(16),S=a(28),$=a(7),_=a(106),q=a(18),C=a(101),D=Object(C.a)(n||(n=Object(q.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),T=Object(C.a)(c||(c=Object(q.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),M=Object(C.a)(i||(i=Object(q.a)(["\n    mutation addTicket($clientName: String!) {\n        addTicket(clientName: $clientName) {\n            _id\n            clientName\n            pickupDate\n            materials {\n                _id\n                materialName\n                quantity\n            }\n        }\n    }\n"]))),L=Object(C.a)(r||(r=Object(q.a)(["\n    mutation deleteTicket($ticketId: ID!) {\n      deleteTicket(ticketId: $ticketId) {\n        _id\n        clientName\n        pickupDate\n        materials {\n          _id\n          materialName\n          quantity\n        }\n      }\n    }\n"]))),A=Object(C.a)(s||(s=Object(q.a)(["\nmutation addMaterial($ticketId: ID!, $materialName: String!, $quantity: Int!) {\n  addMaterial(ticketId: $ticketId, materialName: $materialName, quantity: $quantity) {\n    _id\n    materials {\n      _id\n      materialName\n      quantity\n    }\n  }\n}\n"]))),E=Object(C.a)(l||(l=Object(q.a)(["\n  mutation deleteMaterial($ticketId: ID!, $materialId: ID!) {\n    deleteMaterial(ticketId: $ticketId, materialId: $materialId) {\n      _id \n      materials {\n        _id\n        materialName\n        quantity\n      }\n    }\n  }\n"]))),B=a(56),R=a(57),F=a(46),U=new(function(){function e(){Object(B.a)(this,e)}return Object(R.a)(e,[{key:"getProfile",value:function(){return Object(F.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(F.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),P=function(e){var t=Object(b.useState)({email:"",password:""}),a=Object($.a)(t,2),n=a[0],c=a[1],i=Object(_.a)(D),r=Object($.a)(i,2),s=r[0],l=r[1].error,o=function(e){var t=e.target,a=t.name,i=t.value;c(Object(p.a)(Object(p.a)({},n),{},Object(S.a)({},a,i)))},d=function(){var e=Object(I.a)(w.a.mark((function e(t){var a,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,s({variables:Object(p.a)({},n)});case 4:a=e.sent,i=a.data,U.login(i.login.token),console.log("data",i),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("errrror"),console.error(e.t0);case 14:c({email:"test2@test.com",password:"test12345"});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(g.jsx)("div",{className:"col-12 col-md-6",children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("h4",{className:"card-header",children:"Login"}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsxs)("form",{onSubmit:d,children:[Object(g.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:n.email,onChange:o}),Object(g.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:n.password,onChange:o}),Object(g.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),l&&Object(g.jsx)("div",{children:"Login failed"})]})]})})})},Q=function(){var e=Object(b.useState)({username:"",email:"",password:""}),t=Object($.a)(e,2),a=t[0],n=t[1],c=Object(_.a)(T),i=Object($.a)(c,2),r=i[0],s=i[1].error,l=function(e){var t=e.target,c=t.name,i=t.value;n(Object(p.a)(Object(p.a)({},a),{},Object(S.a)({},c,i)))},o=function(){var e=Object(I.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,r({variables:Object(p.a)({},a)});case 4:n=e.sent,c=n.data,U.login(c.addUser.token),console.log(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(g.jsx)("div",{className:"col-12 col-md-6",children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("h4",{className:"card-header",children:"Sign Up"}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsxs)("form",{onSubmit:o,children:[Object(g.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",id:"username",value:a.username,onChange:l}),Object(g.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:a.email,onChange:l}),Object(g.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:a.password,onChange:l}),Object(g.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),s&&Object(g.jsx)("div",{children:"Sign up failed"})]})]})})})},Y=a(104),J=Object(C.a)(o||(o=Object(q.a)(["\n    query tickets($clientName: String) {\n        tickets(clientName: $clientName) {\n            _id\n            clientName\n            pickupDate\n            materials {\n                _id\n                materialName\n                quantity\n            }\n        }\n    }\n"]))),W=Object(C.a)(d||(d=Object(q.a)(["\n  query ticket($id: ID!) {\n    ticket(_id: $id) {\n      _id\n      clientName\n      pickupDate\n      materials {\n        _id\n        materialName\n        quantity\n      }\n    }\n  }\n"]))),z=(Object(C.a)(j||(j=Object(q.a)(["\n  query materials($id: ID!) {\n    materials( _id: $id) {\n      _id\n      materialName\n      quantity\n    }\n  }\n"]))),Object(C.a)(u||(u=Object(q.a)(["\n  query client($clientName: String!) {\n    client(clientName: $clientName) {\n      _id\n      clientName\n    }\n  }\n"])))),V=a(30),G=a.n(V),H=a(63),K=function(){var e=Object(b.useState)(""),t=Object($.a)(e,2),a=t[0],n=t[1],c=Object(_.a)(M,{update:function(e,t){var a=t.data.addTicket;try{var n=e.readQuery({query:J}).tickets;e.writeQuery({query:J,data:{tickets:[a].concat(Object(H.a)(n))}})}catch(c){console.error(c)}}}),i=Object($.a)(c,1)[0],r=function(){var e=Object(I.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,i({variables:{clientName:a}});case 4:console.log("added new ticket"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("errrrg"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"New Ticket"}),Object(g.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:r,children:[Object(g.jsx)("input",{placeholder:"Client Name",value:a,className:"",onChange:function(e){n(e.target.value)}}),Object(g.jsx)("button",{className:"",type:"submit",children:"Add Ticket"})]})]})},X={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",widht:"75%",transform:"translate(-50%, -50%)"}};G.a.setAppElement("#root");var Z=function(e){var t=e.tickets,a=e.title,n=m.a.useState(!1),c=Object($.a)(n,2),i=c[0],r=c[1];if(!t.length)return Object(g.jsx)("h3",{children:" No tickets yet "});function s(){r(!1)}return console.log(1111,t),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:a}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:function(){r(!0)},children:"Add Ticket"}),Object(g.jsx)(G.a,{isOpen:i,onRequestClose:s,style:X,contentLabel:"Example Modal",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:s,children:"close"}),Object(g.jsx)(K,{})]})})]}),Object(g.jsx)("div",{className:"flex-row justify-center",children:t&&t.map((function(e){return Object(g.jsxs)("div",{className:"card mb-3",children:[Object(g.jsxs)("div",{className:"card-header ",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:"pt-2 float-right",children:e.pickupDate}),Object(g.jsxs)("h4",{children:[" Client: ",e.clientName]})]}),Object(g.jsx)("h6",{children:Object(g.jsxs)(x.b,{to:"/ticket/".concat(e._id),style:{fontWeight:700},className:"text-light",children:["Ticket Number: ",e._id]})})]}),Object(g.jsx)("div",{className:"card-body",children:e.materials.map((function(e){return Object(g.jsxs)("div",{className:"flex-row justify-space-between card mb-auto pl-2",children:[Object(g.jsxs)("p",{children:["Metal: ",e.materialName]}),Object(g.jsxs)("p",{children:[" ",e.quantity," lbs"]})]},e._id)}))})]},e._id)}))})]})},ee=function(){var e=Object(Y.a)(J),t=e.loading,a=e.data,n=(null===a||void 0===a?void 0:a.tickets)||[];return console.log(n),Object(g.jsx)("main",{children:Object(g.jsx)("div",{className:"flex-row justify-space-between",children:Object(g.jsx)("div",{className:"col-12 mb-3",children:t?Object(g.jsx)("div",{children:"Loading..."}):Object(g.jsx)(Z,{tickets:n,title:"Tracker Sheet"})})})})},te=function(e){var t=Object(f.f)().clientName;console.log(t);var a=Object(Y.a)(z,{variables:{clientName:t}}),n=a.loading,c=a.data,i=(null===c||void 0===c?void 0:c.client)||{};return console.log("client",i),n?Object(g.jsx)("div",{children:"Loading..."}):Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"flex-row mb-3",children:Object(g.jsxs)("h2",{className:"bg-dark text-secondary p-3 display-inline-block",children:["Viewing ",i.clientName,"'s profile."]})}),Object(g.jsx)("div",{className:"flex-row justify-space-between mb-3"})]})},ae=function(){var e=Object(b.useState)(""),t=Object($.a)(e,2),a=t[0],n=t[1],c=Object(b.useState)(0),i=Object($.a)(c,2),r=i[0],s=i[1],l=Object(f.f)().id;console.log(l);var o=Object(_.a)(A),d=Object($.a)(o,1)[0],j=function(){var e=Object(I.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("form submit",l,a,r),e.prev=2,e.next=5,d({variables:{ticketId:l,materialName:a,quantity:r}});case 5:console.log(l,a,r),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("ergg"),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"add material"}),Object(g.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:j,children:[Object(g.jsx)("input",{placeholder:"Material",name:"materialName",type:"materialName",id:"materialName",value:a,className:"",onChange:function(e){n(e.target.value)}}),Object(g.jsx)("input",{placeholder:"Quantity",name:"quantity",type:"quantity",id:"quantity",value:r,className:"",onChange:function(e){s(e.target.value)}}),Object(g.jsx)("button",{className:"",type:"submit",children:"Add Ticket"})]})]})},ne={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",widht:"75%",transform:"translate(-50%, -50%)"}};G.a.setAppElement("#root");var ce=function(e){var t=m.a.useState(!1),a=Object($.a)(t,2),n=a[0],c=a[1],i=Object(b.useState)(0),r=Object($.a)(i,2),s=r[0],l=r[1],o=Object(f.f)().id,d=Object(Y.a)(W,{variables:{id:o}}),j=d.loading,u=d.data,O=Object(_.a)(L,{variables:{ticketId:o}}),h=Object($.a)(O,1)[0],p=Object(_.a)(E),x=Object($.a)(p,1)[0],v=(null===u||void 0===u?void 0:u.ticket)||{};if(console.log("materialId",s),console.log("ticketId",o),console.log(222,v),j)return Object(g.jsx)("div",{children:"Loading..."});var N=function(){var e=Object(I.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(t.target.value),console.log(111,s),e.prev=3,e.next=6,x({variables:{ticketId:o,materialId:s}});case 6:console.log(555,s),console.log("delete ticket from client side"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("errr"),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();function k(){c(!1)}return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"card mb-3",children:[Object(g.jsxs)("div",{className:" flex-row justify-space-between card-header",children:[Object(g.jsxs)("span",{style:{fontWeight:700},className:"text-light",children:[Object(g.jsxs)("h3",{children:[" ",v.clientName," "]}),Object(g.jsx)("button",{onClick:h,children:" Delete Ticket "}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:function(){c(!0)},children:" Add Material "}),Object(g.jsx)(G.a,{isOpen:n,onRequestClose:k,style:ne,contentLabel:"Example Modal",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:k,children:"close"}),Object(g.jsx)(ae,{})]})})]})]})," "]}),Object(g.jsx)("div",{className:"card-body",children:v.materials.map((function(e){return Object(g.jsxs)("div",{className:"card mb-0",children:[Object(g.jsx)("p",{children:e._id}),Object(g.jsx)("p",{children:e.materialName}),Object(g.jsx)("p",{children:e.quantity}),Object(g.jsxs)("div",{className:"flex-row",children:[Object(g.jsx)("div",{}),Object(g.jsx)("div",{className:"pl-3",children:Object(g.jsx)("button",{value:e._id,onClick:N,children:"Delete Material (double click)"})})]})]},e._id)}))})]})})},ie=function(){return Object(g.jsx)("div",{children:"Oops, we couldn't find that page."})},re=a(62),se=a(102),le=a(103),oe=a(100),de=a(61),je=Object(re.a)({uri:"/graphql"}),ue=Object(de.a)((function(e,t){var a=t.headers,n=localStorage.getItem("id_token");return{headers:Object(p.a)(Object(p.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),be=new se.a({link:ue.concat(je),cache:new le.a});var me=function(){return Object(g.jsx)(oe.a,{client:be,children:Object(g.jsx)(x.a,{children:Object(g.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(g.jsx)(N,{}),Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)(f.c,{children:[Object(g.jsx)(f.a,{exact:!0,path:"/",component:ee}),Object(g.jsx)(f.a,{exact:!0,path:"/login",component:P}),Object(g.jsx)(f.a,{exact:!0,path:"/signup",component:Q}),Object(g.jsx)(f.a,{exact:!0,path:"/profile/:clientName?",component:te}),Object(g.jsx)(f.a,{exact:!0,path:"/ticket/:id",component:ce}),Object(g.jsx)(f.a,{component:ie})]})}),Object(g.jsx)(k,{})]})})})},Oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,107)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};h.a.render(Object(g.jsx)(m.a.StrictMode,{children:Object(g.jsx)(me,{})}),document.getElementById("root")),Oe()}},[[90,1,2]]]);
//# sourceMappingURL=main.791b033e.chunk.js.map